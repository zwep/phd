"""
I dont want to look through all the time images...

Subject

[0, 3, 5, 6, 8, 9, 10, 11, 14, 16, 19]

NOT Subject
decided on reconstruction errors and simplu little contrast in the image

1 - v9_07032021_1236259_12_3_saV4
2 - v9_23012021_1243567_12_2_saV4
4 - v8_26062019_1552244_13_3_saV4
7 - v9_13022021_1353141_12_2_saV4
12 - v8_26062019_1612435_19_3_saV4
13 - v9_06032021_1323029_11_3_saV4
15 - v9_02122020_1740079_12_2_saV4


If I ever want To get back the old v-number stuff.. I cant use this string
'{"old_name": ["v9_06032021_1220300_14_3_saV4.nrrd",    "v9_06032021_1220300_14_3_saV4.nrrd",    "v9_06032021_1220300_14_3_saV4.nrrd",    "v9_06032021_1220300_14_3_saV4.nrrd",    "v9_07032021_1236259_12_3_saV4.nrrd",    "v9_07032021_1236259_12_3_saV4.nrrd",    "v9_07032021_1236259_12_3_saV4.nrrd",    "v9_07032021_1236259_12_3_saV4.nrrd",    "v9_07032021_1236259_12_3_saV4.nrrd",    "v9_23012021_1243567_12_2_saV4.nrrd",    "v9_23012021_1243567_12_2_saV4.nrrd",    "v9_23012021_1243567_12_2_saV4.nrrd",    "v9_23012021_1243567_12_2_saV4.nrrd",    "v8_26062019_2107058_13_3_saV4.nrrd",    "v8_26062019_2107058_13_3_saV4.nrrd",    "v8_26062019_2107058_13_3_saV4.nrrd",    "v8_26062019_2107058_13_3_saV4.nrrd",    "v8_26062019_2107058_13_3_saV4.nrrd",    "v8_26062019_1552244_13_3_saV4.nrrd",    "v9_06032021_0941111_12_3_saV4.nrrd",    "v9_06032021_0941111_12_3_saV4.nrrd",    "v9_06032021_0941111_12_3_saV4.nrrd",    "v9_06032021_0941111_12_3_saV4.nrrd",    "as_14082019_1740004_30_3_saV4.nrrd",    "v9_13022021_1353141_12_2_saV4.nrrd",    "v9_13022021_1353141_12_2_saV4.nrrd",    "v9_13022021_1353141_12_2_saV4.nrrd",    "v9_13022021_1353141_12_2_saV4.nrrd",    "v8_26062019_1930358_7_3_saV4.nrrd",    "v8_26062019_1930358_7_3_saV4.nrrd",    "v8_26062019_1930358_7_3_saV4.nrrd",    "v8_26062019_1930358_7_3_saV4.nrrd",    "v8_26062019_1930358_7_3_saV4.nrrd",    "v9_24012021_1250006_11_2_saV4.nrrd",    "v9_24012021_1250006_11_2_saV4.nrrd",    "v9_24012021_1250006_11_2_saV4.nrrd",    "v9_24012021_1250006_11_2_saV4.nrrd",    "v9_06032021_1444040_12_3_saV4.nrrd",    "v9_06032021_1444040_12_3_saV4.nrrd",    "as_14082019_1741256_31_3_saV4.nrrd",    "v8_26062019_1612435_19_3_saV4.nrrd",    "v9_06032021_1323029_11_3_saV4.nrrd",    "v9_06032021_1323029_11_3_saV4.nrrd",    "v9_23012021_1146132_11_2_saV4.nrrd",    "v9_02122020_1740079_12_2_saV4.nrrd",    "as_06012021_1553569_7_2_sa_ppu_1sliceV4.nrrd",    "as_14082019_1744297_33_3_saV4.nrrd",    "v8_26062019_1556015_15_3_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_09122020_1713213_12_2_saV4.nrrd",    "v9_09122020_1713213_12_2_saV4.nrrd",    "v9_09122020_1713213_12_2_saV4.nrrd",    "v9_09122020_1713213_12_2_saV4.nrrd",    "v9_06022021_1142065_13_2_saV4.nrrd",    "v9_06022021_1142065_13_2_saV4.nrrd",    "v9_06022021_1142065_13_2_saV4.nrrd",    "v8_26062019_1615461_20_3_saV4.nrrd"  ],  "new_name": [    "subject_0000_0",    "subject_0000_1",    "subject_0000_2",    "subject_0000_3",    "subject_0001_0",    "subject_0001_1",    "subject_0001_2",    "subject_0001_3",    "subject_0001_4",    "subject_0002_0",    "subject_0002_1",    "subject_0002_2",    "subject_0002_3",    "subject_0003_0",    "subject_0003_1",    "subject_0003_2",    "subject_0003_3",    "subject_0003_4",    "subject_0004_0",    "subject_0005_0",    "subject_0005_1",    "subject_0005_2",    "subject_0005_3",    "subject_0006_0",    "subject_0007_0",    "subject_0007_1",    "subject_0007_2",    "subject_0007_3",    "subject_0008_0",    "subject_0008_1",    "subject_0008_2",    "subject_0008_3",    "subject_0008_4",    "subject_0009_0",    "subject_0009_1",    "subject_0009_2",    "subject_0009_3",    "subject_0010_0",    "subject_0010_1",    "subject_0011_0",    "subject_0012_0",    "subject_0013_0",    "subject_0013_1",    "subject_0014_0",    "subject_0015_0",    "subject_0016_0",    "subject_0017_0",    "subject_0018_0",    "subject_0019_0",    "subject_0019_1",    "subject_0019_2",    "subject_0019_3",    "subject_0019_4",    "subject_0019_5",    "subject_0019_6",    "subject_0020_0",    "subject_0020_1",    "subject_0020_2",    "subject_0020_3",    "subject_0021_0",    "subject_0021_1",    "subject_0021_2",    "subject_0022_0"  ]}'

"""

import os
import shutil
import re

source_dir = '/data/cmr7t3t/cmr7t/Image'
dest_dir = '/data/cmr7t3t/cmr7t/Image_selection_seb'

selected_subjects = [0, 3, 5, 6, 8, 9, 10, 11, 14, 16, 19]
source_files = [x for x in os.listdir(source_dir) if x.endswith('nii.gz')]

for i_file in sorted(source_files):
    subject_id = re.findall('subject_00([0-9]{2})_[0-9]', i_file)[0]
    subject_id = int(subject_id)
    print('Copying', subject_id)

    if subject_id in selected_subjects:
        source_location = os.path.join(source_dir, i_file)
        dest_location = os.path.join(dest_dir, i_file)
        shutil.copy(source_location, dest_location)



"""
Check the overlap between all the selectsion
"""

dir_selection_yasmina = '/data/cmr7t3t/cmr7t/Image_selection_yasmina'
dir_selection_sina = '/data/cmr7t3t/cmr7t/Image_selection_sina'
dir_selection_seb = '/data/cmr7t3t/cmr7t/Image_selection_seb'

set_yasmina = set(os.listdir(dir_selection_yasmina))
set_seb = set(os.listdir(dir_selection_seb))
set_sina = set(os.listdir(dir_selection_sina))

print('Main result')
sel_set = set_sina.intersection(set_seb).intersection(set_yasmina)
for i_item in list(sel_set):
    print(i_item)

print('Total number seb/sina/yasmina', len(sel_set))


print('Main result - Union')
sel_set = set_sina.union(set_seb).union(set_yasmina)
for i_item in list(sel_set):
    print(i_item)

print('Total number seb/sina/yasmina', len(sel_set))


print('Seb Sina')
sel_set = set_sina.intersection(set_seb)
for i_item in list(sel_set):
    print(i_item)

print('Total number seb/sina', len(sel_set))

print('Seb Yasmina')
sel_set = set_yasmina.intersection(set_seb)
for i_item in list(sel_set):
    print(i_item)

print('Total number seb/yasmina', len(sel_set))

print('Yasmina Sina')
sel_set = set_yasmina.intersection(set_sina)
for i_item in list():
    print(i_item)

print('Total number sina/yasmina', len(sel_set))


"""
Recover the scan names from the patients that I excluded 
"""
import json

name_conv_str = '{"old_name": ["v9_06032021_1220300_14_3_saV4.nrrd",    "v9_06032021_1220300_14_3_saV4.nrrd",    "v9_06032021_1220300_14_3_saV4.nrrd",    "v9_06032021_1220300_14_3_saV4.nrrd",    "v9_07032021_1236259_12_3_saV4.nrrd",    "v9_07032021_1236259_12_3_saV4.nrrd",    "v9_07032021_1236259_12_3_saV4.nrrd",    "v9_07032021_1236259_12_3_saV4.nrrd",    "v9_07032021_1236259_12_3_saV4.nrrd",    "v9_23012021_1243567_12_2_saV4.nrrd",    "v9_23012021_1243567_12_2_saV4.nrrd",    "v9_23012021_1243567_12_2_saV4.nrrd",    "v9_23012021_1243567_12_2_saV4.nrrd",    "v8_26062019_2107058_13_3_saV4.nrrd",    "v8_26062019_2107058_13_3_saV4.nrrd",    "v8_26062019_2107058_13_3_saV4.nrrd",    "v8_26062019_2107058_13_3_saV4.nrrd",    "v8_26062019_2107058_13_3_saV4.nrrd",    "v8_26062019_1552244_13_3_saV4.nrrd",    "v9_06032021_0941111_12_3_saV4.nrrd",    "v9_06032021_0941111_12_3_saV4.nrrd",    "v9_06032021_0941111_12_3_saV4.nrrd",    "v9_06032021_0941111_12_3_saV4.nrrd",    "as_14082019_1740004_30_3_saV4.nrrd",    "v9_13022021_1353141_12_2_saV4.nrrd",    "v9_13022021_1353141_12_2_saV4.nrrd",    "v9_13022021_1353141_12_2_saV4.nrrd",    "v9_13022021_1353141_12_2_saV4.nrrd",    "v8_26062019_1930358_7_3_saV4.nrrd",    "v8_26062019_1930358_7_3_saV4.nrrd",    "v8_26062019_1930358_7_3_saV4.nrrd",    "v8_26062019_1930358_7_3_saV4.nrrd",    "v8_26062019_1930358_7_3_saV4.nrrd",    "v9_24012021_1250006_11_2_saV4.nrrd",    "v9_24012021_1250006_11_2_saV4.nrrd",    "v9_24012021_1250006_11_2_saV4.nrrd",    "v9_24012021_1250006_11_2_saV4.nrrd",    "v9_06032021_1444040_12_3_saV4.nrrd",    "v9_06032021_1444040_12_3_saV4.nrrd",    "as_14082019_1741256_31_3_saV4.nrrd",    "v8_26062019_1612435_19_3_saV4.nrrd",    "v9_06032021_1323029_11_3_saV4.nrrd",    "v9_06032021_1323029_11_3_saV4.nrrd",    "v9_23012021_1146132_11_2_saV4.nrrd",    "v9_02122020_1740079_12_2_saV4.nrrd",    "as_06012021_1553569_7_2_sa_ppu_1sliceV4.nrrd",    "as_14082019_1744297_33_3_saV4.nrrd",    "v8_26062019_1556015_15_3_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_31012021_1634439_23_2_saV4.nrrd",    "v9_09122020_1713213_12_2_saV4.nrrd",    "v9_09122020_1713213_12_2_saV4.nrrd",    "v9_09122020_1713213_12_2_saV4.nrrd",    "v9_09122020_1713213_12_2_saV4.nrrd",    "v9_06022021_1142065_13_2_saV4.nrrd",    "v9_06022021_1142065_13_2_saV4.nrrd",    "v9_06022021_1142065_13_2_saV4.nrrd",    "v8_26062019_1615461_20_3_saV4.nrrd"  ],  "new_name": [    "subject_0000_0",    "subject_0000_1",    "subject_0000_2",    "subject_0000_3",    "subject_0001_0",    "subject_0001_1",    "subject_0001_2",    "subject_0001_3",    "subject_0001_4",    "subject_0002_0",    "subject_0002_1",    "subject_0002_2",    "subject_0002_3",    "subject_0003_0",    "subject_0003_1",    "subject_0003_2",    "subject_0003_3",    "subject_0003_4",    "subject_0004_0",    "subject_0005_0",    "subject_0005_1",    "subject_0005_2",    "subject_0005_3",    "subject_0006_0",    "subject_0007_0",    "subject_0007_1",    "subject_0007_2",    "subject_0007_3",    "subject_0008_0",    "subject_0008_1",    "subject_0008_2",    "subject_0008_3",    "subject_0008_4",    "subject_0009_0",    "subject_0009_1",    "subject_0009_2",    "subject_0009_3",    "subject_0010_0",    "subject_0010_1",    "subject_0011_0",    "subject_0012_0",    "subject_0013_0",    "subject_0013_1",    "subject_0014_0",    "subject_0015_0",    "subject_0016_0",    "subject_0017_0",    "subject_0018_0",    "subject_0019_0",    "subject_0019_1",    "subject_0019_2",    "subject_0019_3",    "subject_0019_4",    "subject_0019_5",    "subject_0019_6",    "subject_0020_0",    "subject_0020_1",    "subject_0020_2",    "subject_0020_3",    "subject_0021_0",    "subject_0021_1",    "subject_0021_2",    "subject_0022_0"  ]}'
name_dict = json.loads(name_conv_str)
conversion_dict = dict(zip(name_dict['new_name'], name_dict['old_name']))
print(conversion_dict['subject_0000_0'])